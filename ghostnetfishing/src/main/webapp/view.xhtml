<ui:composition template="snippets/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

	<ui:define name="head-title">
		<title>See Ghost Nets</title>
	</ui:define>

	<ui:define name="content">

		<div class="container mt-3 mb-3">

			<div class="row">
				<div class="col-12 col-md-9">
					<h2 class="header">See Ghost Nets</h2>
					<div class="content-wrapper">
						<div id="map"></div>
						<script>



var center = [55.454, 4.504]

const map = L.map('map').setView(center, 5);

const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
	maxZoom: 19,
	attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
	noWrap: true
}).addTo(map);


var greenIcon = new L.Icon({
	  iconUrl: './assets/leaflet-color-markers/img/marker-icon-2x-green.png',
	  shadowUrl: './assets/leaflet-color-markers/img//marker-shadow.png',
	  iconSize: [25, 41],
	  iconAnchor: [12, 41],
	  popupAnchor: [1, -34],
	  shadowSize: [41, 41]
});

var yellowIcon = new L.Icon({
	  iconUrl: './assets/leaflet-color-markers/img/marker-icon-2x-yellow.png',
	  shadowUrl: './assets/leaflet-color-markers/img//marker-shadow.png',
	  iconSize: [25, 41],
	  iconAnchor: [12, 41],
	  popupAnchor: [1, -34],
	  shadowSize: [41, 41]
});

var redIcon = new L.Icon({
	  iconUrl: './assets/leaflet-color-markers/img/marker-icon-2x-red.png',
	  shadowUrl: './assets/leaflet-color-markers/img//marker-shadow.png',
	  iconSize: [25, 41],
	  iconAnchor: [12, 41],
	  popupAnchor: [1, -34],
	  shadowSize: [41, 41]
});

var greyIcon = new L.Icon({
	  iconUrl: './assets/leaflet-color-markers/img/marker-icon-2x-grey.png',
	  shadowUrl: './assets/leaflet-color-markers/img//marker-shadow.png',
	  iconSize: [25, 41],
	  iconAnchor: [12, 41],
	  popupAnchor: [1, -34],
	  shadowSize: [41, 41]
});

var blackIcon = new L.Icon({
	  iconUrl: './assets/leaflet-color-markers/img/marker-icon-2x-black.png',
	  shadowUrl: './assets/leaflet-color-markers/img//marker-shadow.png',
	  iconSize: [25, 41],
	  iconAnchor: [12, 41],
	  popupAnchor: [1, -34],
	  shadowSize: [41, 41]
});



<ui:repeat value="#{ghostNetBean.allGhostNets}" var="ghostNet">
     var marker = L.marker([<h:outputText value="#{ghostNet.posLatitude}"/>, <h:outputText value="#{ghostNet.posLongitude}"/>], <h:outputText value="#{ghostNet.snippetForMapMarker}"/>); 
     marker.bindPopup("<h:outputText value="#{ghostNet.getDetailsForMapMarker(ghostNet.firstReportBean.timestamp, labelBean.getUserNameLabelById(ghostNet.firstReportBean.userId), labelBean.getStatusLabelById(ghostNet.latestReportBean.statusId,loginBean.languageId), loginBean.languageId)}"/>").openPopup();
     marker.addTo(map);
</ui:repeat>
</script>
					</div>
				</div>

				<div class="col-12 col-md-3">

					<div class="row">
						<h2 class="header">Legend</h2>
					</div>

					<div class="row">
						<div class="content-wrapper">
							<table class="table">

								<tr>
									<td><img class="img-fluid" style="width: 25px;"
										src="./assets/leaflet-color-markers/img/marker-icon-2x-red.png" />
									</td>
									<td>#{statisticBean.ghostNetsWithStatusReported}</td>
									<td>#{labelBean.getStatusLabelById(1,
										loginBean.languageId)}</td>
								</tr>

								<tr>
									<td><img class="img-fluid" style="width: 25px;"
										src="./assets/leaflet-color-markers/img/marker-icon-2x-yellow.png" />
									</td>
									<td>#{statisticBean.ghostNetsWithStatusSalvagePending}</td>
									<td>#{labelBean.getStatusLabelById(2,
										loginBean.languageId)}</td>
								</tr>

								<tr>
									<td><img class="img-fluid" style="width: 25px;"
										src="./assets/leaflet-color-markers/img/marker-icon-2x-green.png" />
									</td>
									<td>#{statisticBean.ghostNetsWithStatusRecovered}</td>
									<td>#{labelBean.getStatusLabelById(3,
										loginBean.languageId)}</td>
								</tr>

								<tr>
									<td><img class="img-fluid" style="width: 25px;"
										src="./assets/leaflet-color-markers/img/marker-icon-2x-grey.png" />
									</td>
									<td>#{statisticBean.ghostNetsWithStatusReportedMissing}</td>
									<td>#{labelBean.getStatusLabelById(4,
										loginBean.languageId)}</td>
								</tr>

								<tr>
									<td><img class="img-fluid" style="width: 25px;"
										src="./assets/leaflet-color-markers/img/marker-icon-2x-black.png" />
									</td>
									<td>#{statisticBean.ghostNetsWithStatusMissing}</td>
									<td>#{labelBean.getStatusLabelById(5,
										loginBean.languageId)}</td>
								</tr>

							</table>

						</div>
						<!-- /content-wrapper -->
					</div>


				</div>
				<!-- /col-3 -->

			</div>
		</div>


	</ui:define>
</ui:composition>